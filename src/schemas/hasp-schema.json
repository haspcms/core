{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://unpkg.com/@haspcms/core@0.3.0/src/schemas/hasp-schema.json",
  "title": "HASP CMS Configuration",
  "description": "Configuration schema for HASP CMS prebuild operations",
  "type": "object",
  "additionalProperties": false,
  "$defs": {
    "path": {
      "$ref": "definitions.json#/definitions/path"
    },
    "url": {
      "$ref": "definitions.json#/definitions/url"
    }
  },
  "properties": {
    "prebuildJSONS": {
      "type": "array",
      "description": "List of JSON endpoints to fetch and cache during prebuild",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "name": {
            "type": "string",
            "description": "Unique identifier for this JSON resource"
          },
          "endpoint": {
            "$ref": "#/$defs/url"
          },
          "outputPath": {
            "$ref": "#/$defs/path"
          },
          "useDeserialization": {
            "type": "boolean",
            "description": "Whether to apply deserialization to the fetched data",
            "default": false
          }
        },
        "required": ["name", "endpoint", "outputPath"]
      }
    },
    "prebuildImages": {
      "type": "array",
      "description": "List of images to download during prebuild",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "url": {
            "$ref": "#/$defs/url"
          },
          "filename": {
            "type": "string",
            "description": "Name to save the file as"
          },
          "downloadPath": {
            "$ref": "#/$defs/path"
          }
        },
        "required": ["url", "filename", "downloadPath"]
      }
    }
  }
}
